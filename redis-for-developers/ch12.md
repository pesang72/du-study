# 마이크로서비스 아키텍처와 레디스 & 레디스 시작하기

### 레디스란

- Key-Value 기반의 인메모리 데이터 저장소
- 빠른 읽기/쓰기 속도와 풍부한 데이터 구조(문자열, 리스트, 셋, 해시, 정렬된 셋 등)를 지원


### 레디스의 특징

#### 단순성
- 키-값 기반의 단순한 데이터 모델  
  - 키-값 형태로 데이터를 저장하는 구조를 가지고 있어, 복잡한 스키마나 관계 설정 없이도 데이터를 손쉽게 저장하고 조회할 수 있다.
  - 문자열(String)뿐만 아니라 해시(Hash), 리스트(List), 셋(Set), 정렬된 셋(Sorted Set) 등 다양한 자료구조를 기본적으로 지원,
  - 임피던스 불일치(Impedance Mismatch) 해소 : 관계형 데이터베이스(RDBMS)에서는 데이터베이스의 테이블 구조와 애플리케이션의 객체 구조 간의 불일치로 인해 변환 작업이 필요하나 redis에서는 다양한 구조를 지원하기에 임피던스 불일치를 최소화
  - 레디스는 메인스레드 1개와 별도의 스레드로 운영된다. 커멘드를 처리하는 대부분의 명령어가 메인스레드를 거쳐간다

---

#### 실시간 응답 
- 인메모리 데이터베이스로 디스크 I/O가 없는 구조이므로 읽기/쓰기 속도가 매우 빠름 → 마이크로초(μs) 단위의 응답 가능

---

#### 고가용성 & 확장성
- 레디스는 자체적으로 HA(High Availability)를 지원, 
- 하나의 마스터 Redis 인스턴스에 여러 슬레이브가 붙고, 슬레이브는 마스터 데이터를 실시간으로 복제
- 마스터 장애 시 슬레이브가 빠르게 승격되어 서비스 중단 없이 운영 지속 가능
- Sentinel
  - 단일 마스터 구조의 고가용성 보장 도구
  - 샤딩(데이터 분산)은 불가능 → 단일 노드가 데이터 전체를 가짐
  - 주요목적 : 장애 감지 및 자동 복구 (Failover)
- Cluster 
  - 샤딩(분산 저장)을 통해 여러 Redis 노드에 데이터를 나누어 저장 
  - 일부 노드가 장애가 나도 전체 클러스터는 계속 동작
  - key 단위의 singleton은 여전히 보장
  - 주요목적 : 데이터 분산 저장 및 고가용성

---

#### 클라우드 네이티브 (Cloud Native)

Redis는 클라우드 환경에 최적화된 구조를 가지고 있으며, 다음과 같은 특성을 가진다.

- **빠른 배포와 확장성**: Redis는 설치가 간단하고 가벼워서 Kubernetes 등 컨테이너 환경에서 빠르게 배포 가능
- **Stateless 아키텍처와의 궁합**: 애플리케이션이 Stateless 구조일 때 Redis를 외부 상태 저장소로 활용하기 적합
- **마이크로서비스 친화적**: 빠른 응답 속도와 독립적 데이터 저장 덕분에 각 서비스의 캐시, 세션 저장소 등으로 활용하기 좋음
- **운영 자동화에 적합**: 오토스케일링, 롤링 업데이트 등 클라우드 네이티브 운영 패턴에 적합하게 작동

---

#### 멀티 클라우드 (Multi-Cloud)

Redis는 특정 클라우드 벤더에 종속되지 않고 다양한 환경에서 동일하게 사용할 수 있다

- **벤더 독립성**: AWS, GCP, Azure 등 어떤 클라우드 환경에서도 Redis OSS를 동일하게 운용 가능
- **이식성**: 클라우드 간 Redis 기반 데이터 교환(Pub/Sub, 캐시 공유 등)이 가능
- **다양한 매니지드 서비스 제공**: ElastiCache (AWS), Memorystore (GCP), Azure Redis 등에서 Redis 인터페이스 동일하게 사용 가능

### 레디스 실행하기 
```text
brew install redis
redis-server (서버 실행)

다른터미널에서 redis-cli 입력 
키 등록: SET mykey hello
키 조회: GET mykey
```

